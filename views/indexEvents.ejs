<%- include('partials/header'); -%>

<div class="container">
  <h2><%= myPageTitle %></h2>
</div>

<div class="row container">
  <form class="in-table-form" method="GET" action="/events/new">
    <button type="submit">Create new event</button>
  </form>
</div>

<div class="container">
    <table class="u-full-width">
        <thead>
          <tr>
            <th>Date</th>
            <th>Event Title</th>
            <th>Description</th>
            <th> </th>

            <% if (loggedIn) { %> 
              <th> </th>
              <th> </th>
              <th> </th>
            <% } %> 

          </tr>
        </thead>

        <tbody>

          <% events.forEach(events => { %>
            <tr>
              <td><%= events.date %></td>
              <td><%= events.eventTitle %></td>
              <td><%= events.description %></td>
              <td>
                <form class="in-table-form" method="GET" action="/events/<%= events._id %>">
                  <button type="submit">View</button>
                </form>
              </td>


              <% if(loggedIn) { %>
                <td>
                  <form class="in-table-form" method="GET" action="/events/<%= events._id %>/edit">
                    <button type="submit">Edit</button>
                  </form>
                </td>
                <td>
                  <form class="in-table-form" method="POST" action="/events/<%= events._id %>?_method=DELETE">
                    <button type="submit">Delete</button>
                  </form>
                </td>
                <td>
                  <form class="in-table-form" method="POST" action="/profile/<%= events._id %>">
                    <button type="submit">Volunteer</button>
                  </form>
                </td>
              <% } %> 

          </tr>
        <% }) %>

        </tbody>
      </table>
</div>

<%- include('partials/footer'); -%>